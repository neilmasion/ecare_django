{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>eCare</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="{% static 'images/logo-icon.png' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/assistance.css' %}">
    <link rel="stylesheet" href="{% static 'css/query.css' %}">
</head>
<body>
    <div id="page-loader">
        <div class="loader-logo">e<strong>Care</strong></div>
        <div class="loader-spinner"></div>
        <span class="loader-text">Loading...</span>
    </div>

    <header class="navbar" id="navbar">
        <div class="nav-container">
            <a href="{% url 'index' %}" class="logo"><span class="logo-icon"></span><span>e<strong>Care</strong></span></a>
            <nav class="nav-center">
                <a href="{% url 'index' %}">Home</a>
                <a href="{% url 'about' %}">About</a>
                <a href="{% url 'services' %}">E-Services</a>
                <a href="{% url 'assistance' %}" class="active">Assistance</a>
                <a href="{% url 'contact' %}">Contact</a>
                {% if user.is_authenticated %}
                <a href="{% url 'profile' %}" class="btn signin mobile-signin" style="display: none;">My Profile</a>
                {% else %}
                <a href="{% url 'account' %}" class="btn signin mobile-signin" style="display: none;">Sign In</a>
                {% endif %}
            </nav>
            {% if user.is_authenticated %}
            <a href="{% url 'profile' %}" class="nav-avatar-btn" title="My Profile">
                {% if user_profile.avatar %}
                    <img src="{{ user_profile.avatar.url }}" alt="Avatar" class="nav-avatar-img">
                {% else %}
                    <span class="nav-avatar-initials">{{ user.first_name|first|upper }}{{ user.last_name|first|upper }}</span>
                {% endif %}
            </a>
            {% else %}
            <a href="{% url 'account' %}" class="btn signin">Sign In</a>
            {% endif %}

            <button class="mobile-toggle" id="mobileToggle">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>
    </header>

    <section class="page assistance-page">
        <div class="content-wrapper">
            <div class="assistance-layout">
                <div class="assistance-info">
                    <div class="assistance-form-container">
                        <div class="form-header">
                            <h2>Assistance Request Form - Demo</h2>
                            <p>Please provide accurate information so we can better assist you</p>
                            <div class="form-progress">
                                <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
                                <p class="progress-text">Step <span id="currentStep">1</span> of 3</p>
                            </div>

                            <div class="process-card">
                                <h3>How It Works</h3>

                                <ol class="process-list">
                                    <li>
                                        <strong>Fill Out Form</strong>
                                        <p>Provide your details and describe your situation</p>
                                    </li>
                                    <li>
                                        <strong>Submit Request</strong>
                                        <p>Your request is reviewed by our team</p>
                                    </li>
                                    <li>
                                        <strong>Get Matched</strong>
                                        <p>We connect you with appropriate resources</p>
                                    </li>
                                    <li>
                                        <strong>Receive Help</strong>
                                        <p>Get the assistance you need within 24-48 hours</p>
                                    </li>
                                </ol>
                            </div>
                        </div>

                        <form id="assistForm" class="assistance-form">
                            <div class="form-step active" data-step="1">
                                <h3>Personal Information</h3>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="firstName">First Name *</label>
                                        <input type="text" id="firstName" name="firstName" required>
                                    </div>

                                    <div class="form-group">
                                        <label for="lastName">Last Name *</label>
                                        <input type="text" id="lastName" name="lastName" required>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="email">Email Address *</label>
                                        <input type="email" id="email" name="email" required>
                                    </div>

                                    <div class="form-group">
                                        <label for="phone">Phone Number *</label>
                                        <input type="tel" id="phone" name="phone" required>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="address">Complete Address *</label>
                                    <textarea id="address" name="address" rows="2" required></textarea>
                                </div>

                                <div class="form-actions">
                                    <button type="button" class="btn primary next-step">Next Step<i class="fa-solid fa-arrow-right"></i></button>
                                </div>
                            </div>

                            <div class="form-step" data-step="2">
                                <h3>Assistance Details</h3>

                                <div class="form-group">
                                    <label for="assistanceType">Type of Assistance Needed *</label>
                                    <select id="assistanceType" name="assistanceType" required>
                                        <option value="">Select assistance type</option>
                                        <option value="medical">Medical Assistance</option>
                                        <option value="financial">Financial Assistance</option>
                                        <option value="educational">Educational Support</option>
                                        <option value="disaster">Disaster Relief</option>
                                        <option value="housing">Housing Assistance</option>
                                        <option value="food">Food Assistance</option>
                                        <option value="legal">Legal Aid</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="urgency">Urgency Level *</label>
                                    <select id="urgency" name="urgency" required>
                                        <option value="">Select urgency level</option>
                                        <option value="emergency">Emergency (Immediate attention needed)</option>
                                        <option value="urgent">Urgent (Within 24 hours)</option>
                                        <option value="high">High (Within 3 days)</option>
                                        <option value="normal">Normal (Within a week)</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="description">Describe Your Situation *</label>
                                    <textarea id="description" name="description" rows="5" placeholder="Please provide detailed information about your situation and what type of help you need..." required></textarea>
                                    <p class="form-hint">Be as specific as possible to help us understand how we can best assist you</p>
                                </div>

                                <div class="form-group">
                                    <label for="previousAssistance">Have you received assistance from us before?</label>
                                    <div class="radio-group">
                                        <label class="radio-label">
                                            <input type="radio" name="previousAssistance" value="yes">
                                            <span>Yes</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="previousAssistance" value="no" checked>
                                            <span>No</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button type="button" class="btn outline prev-step"><i class="fa-solid fa-arrow-left"></i>Previous</button>
                                    <button type="button" class="btn primary next-step">Next Step<i class="fa-solid fa-arrow-right"></i></button>
                                </div>
                            </div>

                            <div class="form-step" data-step="3">
                                <h3>Additional Information</h3>

                                <div class="form-group">
                                    <label for="familyMembers">Number of Family Members</label>
                                    <input type="number" id="familyMembers" name="familyMembers" min="1" value="1">
                                </div>

                                <div class="form-group">
                                    <label for="income">Monthly Household Income (Optional)</label>
                                    <select id="income" name="income">
                                        <option value="">Prefer not to say</option>
                                        <option value="0-10000">Below ₱10,000</option>
                                        <option value="10000-20000">₱10,000 - ₱20,000</option>
                                        <option value="20000-30000">₱20,000 - ₱30,000</option>
                                        <option value="30000-50000">₱30,000 - ₱50,000</option>
                                        <option value="50000+">Above ₱50,000</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="documents">Supporting Documents (Optional)</label>
                                    <div class="file-upload">
                                        <input type="file" id="documents" name="documents" multiple accept=".pdf,.jpg,.jpeg,.png">
                                        <label for="documents" class="file-upload-label">
                                            <i class="fa-solid fa-arrow-up-from-bracket"></i><br>
                                            <span>Click to upload or drag and drop</span>
                                            <span class="file-hint">PDF, JPG, PNG (Max 5MB each)</span>
                                        </label>
                                    </div>
                                    <p class="form-hint">Supporting documents like IDs, medical records, or bills can help expedite your request</p>
                                </div>

                                <div class="form-group">
                                    <label for="additionalNotes">Additional Notes or Comments</label>
                                    <textarea id="additionalNotes" name="additionalNotes" rows="3"
                                        placeholder="Any other information you'd like to share..."></textarea>
                                </div>

                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="terms" name="terms" required>
                                        <span>I agree that the information provided is accurate and I understand thiswill be reviewed by authorized personnel *</span>
                                    </label>
                                </div>

                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="consent" name="consent" required>
                                        <span>I consent to being contacted regarding my assistance request *</span>
                                    </label>
                                </div>

                                <div class="form-actions">
                                    <button type="button" class="btn outline prev-step">
                                        <i class="fa-solid fa-arrow-left"></i>Previous</button>
                                    <button type="submit" class="btn primary submit-btn">Submit Request</button>
                                </div>
                            </div>
                        </form>

                        <div id="successMessage" class="success-message hidden">
                            <div class="success-icon">✅</div>
                            <h3>Request Submitted Successfully!</h3>
                            <p>Thank you for reaching out. Your assistance request has been received and is being reviewed by our team.</p>
                            
                            <div class="success-details">
                                <p><strong>Reference Number:</strong> <span id="referenceNumber">CC-2026-XXXX</span></p>
                                <p><strong>Expected Response:</strong> Within 24-48 hours</p>
                            </div>
                            <p>We will contact you via email or phone with updates on your request. Please check your inbox regularly.</p>
                            
                            <div class="success-actions">
                                <button class="btn primary" onclick="location.reload()">Submit Another Request</button>
                                <a href="{% url 'index' %}" class="btn outline">Return to Home</a>
                            </div>
                        </div>
                    </div>

                    <div class="info-container">
                        <div class="info-card">
                            <h3>Emergency Assistance</h3>
                            <p>For urgent situations requiring immediate attention, call our 24/7 hotline:</p><hr>
                            <a href="tel:911" class="emergency-number"><i class="fa-solid fa-phone-volume"></i> 911</a>
                            <p class="info-note">Available 24 hours a day, 7 days a week</p>
                        </div>

                        <div class="info-card">
                            <h3>Your Privacy Matters</h3>
                            <p>All information submitted through this form is confidential and protected. We only share
                                details with
                                authorized personnel who can help with your request.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="assistance-types">
        <div class="content-wrapper">
            <div class="section-label">Types of Assistance</div>
            <h2 class="section-title">We're Here to Help With</h2>

            <div class="carousel-container">
                <button class="carousel-nav prev" id="carouselPrev">
                    <i class="fas fa-chevron-left"></i>
                </button>

                <div class="carousel-wrapper">
                    <div class="carousel-track" id="carouselTrack">
                        <div class="type-card carousel-item">
                            <h4>Medical Assistance</h4>
                            <p>Help with medical bills, medicines, hospitalization costs, and healthcare access</p>
                        </div>

                        <div class="type-card carousel-item">
                            <h4>Financial Aid</h4>
                            <p>Emergency financial support for rent, utilities, and basic necessities</p>
                        </div>

                        <div class="type-card carousel-item">
                            <h4>Educational Support</h4>
                            <p>Scholarships, school supplies, tuition assistance, and tutoring programs</p>
                        </div>

                        <div class="type-card carousel-item">
                            <h4>Disaster Relief</h4>
                            <p>Emergency shelter, food, clothing, and recovery assistance after disasters</p>
                        </div>

                        <div class="type-card carousel-item">
                            <h4>Food Assistance</h4>
                            <p>Food packages, meal programs, and nutrition support for families in need</p>
                        </div>

                        <div class="type-card carousel-item">
                            <h4>Legal Aid</h4>
                            <p>Free legal consultations and support for community members</p>
                        </div>
                    </div>
                </div>

                <button class="carousel-nav next" id="carouselNext">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>

            <div class="carousel-indicators" id="carouselIndicators">
                <span class="indicator active" data-index="0"></span>
                <span class="indicator" data-index="1"></span>
                <span class="indicator" data-index="2"></span>
                <span class="indicator" data-index="3"></span>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-main">
                <div class="footer-brand">
                    <h1 class="logo"><span>e<strong>Care</strong></span></h1>
                    <p>Empowering communities through digital innovation and transparent governance.</p>
                    <div class="social-links">
                        <a href="https://facebook.com/" aria-label="Facebook" target="_blank"><i class="fa-brands fa-facebook-f"></i></a>
                        <a href="https://twitter.com/" aria-label="Twitter" target="_blank"><i class="fa-brands fa-x-twitter" ></i></a>
                        <a href="https://instagram.com/" aria-label="Instagram" target="_blank"><i class="fa-brands fa-instagram"></i></a>
                    </div>
                </div>

                <div class="footer-links">
                    <div class="footer-column">
                        <h1>Services</h1>
                        <a href="{% url 'services' %}#clearance">Online Clearance</a>
                        <a href="{% url 'services' %}#appointment">Appointments</a>
                        <a href="{% url 'services' %}#reporting">Incident Reports</a>
                        <a href="{% url 'services' %}#volunteer">Volunteer Program</a>
                    </div>

                    <div class="footer-column">
                        <h1>Support</h1>
                        <a href="{% url 'assistance' %}">Request Help</a>
                        <a href="{% url 'contact' %}">Contact Us</a>
                        <a href="#">FAQs</a>
                        <a href="#">Documentation</a>
                    </div>

                    <div class="footer-column">
                        <h1>About</h1>
                        <a href="{% url 'about' %}">Our Mission</a>
                        <a href="{% url 'about' %}">Our Team</a>
                        <a href="#">Privacy Policy</a>
                        <a href="#">Terms of Service</a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>© 2026 eCare. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <button class="scroll-to-top" id="scrollToTop">↑</button>
    <script type="module" src="{% static 'js/main.js' %}"></script>
    <script>
        (function () {
            var loader = document.getElementById('page-loader');
            if (!loader) return;

            function hideLoader() {
                loader.style.opacity = '0';
                setTimeout(function () {
                    if (loader && loader.parentNode) {
                        loader.parentNode.removeChild(loader);
                    }
                }, 500);
            }

            var maxWait = setTimeout(hideLoader, 4000);

            if (document.readyState === 'complete') {
                clearTimeout(maxWait);
                setTimeout(hideLoader, 250);
            } else {
                window.addEventListener('load', function () {
                    clearTimeout(maxWait);
                    setTimeout(hideLoader, 250);
                });
            }
        })();
    </script>
</body>
</html>